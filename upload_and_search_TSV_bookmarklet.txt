javascript:(function()%7B%2F*DEMO%20Video%3A%20https%3A%2F%2Fyoutu.be%2Fb8BbmCk8OL0*%2Fvar%20ele%20%3D%20(t)%20%3D%3E%20document.createElement(t)%3Bvar%20attr%20%3D%20(o%2C%20k%2C%20v)%20%3D%3E%20o.setAttribute(k%2C%20v)%3Bvar%20reg%20%3D%20(o%2C%20n)%20%3D%3E%20o%20%3F%20o%5Bn%5D%20%3A%20''%3Bvar%20cn%20%3D%20(o%2C%20s)%20%3D%3E%20o%20%3F%20o.getElementsByClassName(s)%20%3A%20console.log(o)%3Bvar%20tn%20%3D%20(o%2C%20s)%20%3D%3E%20o%20%3F%20o.getElementsByTagName(s)%20%3A%20console.log(o)%3Bvar%20gi%20%3D%20(o%2C%20s)%20%3D%3E%20o%20%3F%20o.getElementById(s)%20%3A%20console.log(o)%3Bvar%20unq%20%3D%20(arr)%20%3D%3E%20arr.filter((e%2C%20p%2C%20a)%20%3D%3E%20a.indexOf(e)%20%3D%3D%20p)%3Bvar%20matchAllregXarr%20%3D%20(t%2C%20x)%20%3D%3E%20x.every(r%20%3D%3E%20r.test(t))%3Bvar%20doc%20%3D%20document%3Bvar%20jdat_file%20%3D%20''%3Bvar%20tableOutput%3Bfunction%20hoverOutBtn()%20%7Bvar%20b%20%3D%20this.style.background%3Bvar%20c%20%3D%20this.style.color%3Bthis.style.background%20%3D%20c%3Bthis.style.color%20%3D%20b%3Bthis.style.transition%20%3D%20%22all%20173ms%22%3B%7Dfunction%20downloadr(arr2D%2C%20filename)%20%7Bif%20(%2F%5C.tsv%24%7C%5C.csv%24%2F.test(filename)%20%3D%3D%3D%20true)%20%7Bvar%20data%20%3D%20''%3Barr2D.forEach(row%20%3D%3E%20%7Bvar%20arrRow%20%3D%20''%3Brow.forEach(col%20%3D%3E%20%7Bcol%20%3F%20arrRow%20%3D%20arrRow%20%2B%20col.toString()%20%2B%20'%5Ct'%20%3A%20arrRow%20%3D%20arrRow%20%2B%20'%20%5Ct'%3B%7D)%3Bdata%20%3D%20data%20%2B%20arrRow%20%2B%20'%5Cr'%3B%7D)%3B%7Dif%20(%2F%5C.json%24%7C.js%24%2F.test(filename)%20%3D%3D%3D%20true)%20%7Bvar%20data%20%3D%20JSON.stringify(arr2D)%3Bvar%20type%20%3D%20'data%3Aapplication%2Fjson%3Bcharset%3Dutf-8%2C'%3B%7D%20else%20%7Bvar%20type%20%3D%20'data%3Atext%2Fplain%3Bcharset%3Dutf-8%2C'%3B%7Dvar%20file%20%3D%20new%20Blob(%5Bdata%5D%2C%20%7Btype%3A%20type%7D)%3Bif%20(window.navigator.msSaveOrOpenBlob)%20%7Bwindow.navigator.msSaveOrOpenBlob(file%2C%20filename)%3B%7D%20else%20%7Bvar%20a%20%3D%20document.createElement('a')%2Curl%20%3D%20URL.createObjectURL(file)%3Ba.href%20%3D%20url%3Ba.download%20%3D%20filename%3Bdocument.body.appendChild(a)%3Ba.click()%3BsetTimeout(()%20%3D%3E%20%7Bdocument.body.removeChild(a)%3Bwindow.URL.revokeObjectURL(url)%3B%7D%2C%2010)%3B%7D%7Dfunction%20createUploadHTML()%7Bif(gi(doc%2C'uploader_container'))%20gi(doc%2C'uploader_container').outerHTML%20%3D%20''%3Bvar%20popCont%20%3D%20ele(%22div%22)%3Bdoc.body.appendChild(popCont)%3Battr(popCont%2C'id'%2C'uploader_container')%3Battr(popCont%2C%20'style'%2C%20%60display%3A%20inline-block%3B%20width%3A%20260px%3B%20height%3A%20400px%3B%20position%3A%20fixed%3B%20top%3A%2020%25%3B%20left%3A%2050%25%3B%20background%3A%20transparent%3B%20border-radius%3A%20.15em%3B%20padding%3A%203px%3B%20z-index%3A%2010000%3B%60)%3Bvar%20head%20%3D%20ele('div')%3BpopCont.appendChild(head)%3Bdoc.body.appendChild(popCont)%3Battr(head%2C%20'id'%2C%20'tsv_main_top_header')%3Battr(head%2C%20'style'%2C%20%60display%3A%20inline-block%3B%20width%3A%20100%25%3B%20background%3A%20%23004471%3B%20border-radius%3A%20.15em%3B%20padding%3A%203px%3B%60)%3Bvar%20closeBtn%20%3D%20ele(%22button%22)%3Battr(closeBtn%2C%20%22id%22%2C%20%22note_btn_close%22)%3Bhead.appendChild(closeBtn)%3Battr(closeBtn%2C'style'%2C%60background%3A%20transparent%3B%20display%3A%20inline-block%3B%20width%3A%2022px%3B%20height%3A%2022px%3B%20border-radius%3A%2050%25%3B%20transition%3A%20all%20366ms%3B%20transition-timing-function%3A%20cubic-bezier(1%2C-1.12%2C.18%2C1.93)%3B%20padding%3A%200px%3B%20border%3A%200px%3B%20cursor%3A%20pointer%3B%20user-select%3A%20none%3B%20font-weight%3A%20bold%3B%20border%3A%203px%20solid%20Crimson%3B%20color%3A%20Crimson%3B%60)%3BcloseBtn.addEventListener(%22click%22%2C%20close)%3BcloseBtn.addEventListener('mouseover'%2ChoverOutBtn)%3BcloseBtn.addEventListener('mouseout'%2ChoverOutBtn)%3Bvar%20cont%20%3D%20ele('div')%3BpopCont.appendChild(cont)%3Battr(cont%2C%20'id'%2C%20'tsv_contBody')%3Battr(cont%2C%20'style'%2C%20%60display%3A%20inline-block%3B%20width%3A%20100%25%3B%20height%3A%2040%25%3B%20background%3A%20%23fff%3B%20border%3A%201px%20dotted%20%23004471%3B%20order-radius%3A%20.15em%3B%20padding%3A%203px%3B%60)%3Bvar%20uploadElm%20%3D%20ele(%22input%22)%3Battr(%20uploadElm%2C%20%22id%22%2C%20%22customFileInput%22%20)%3Battr(%20uploadElm%2C%20%22type%22%2C%20%22file%22%20)%3Bcont.appendChild(uploadElm)%3BuploadElm.style.transform%20%3D%20%22scale(1.1%2C%201.1)%20translate(5%25%2C%2080%25)%22%3BuploadElm.addEventListener(%22change%22%2C%20handleFiles)%3B%7Dfunction%20close()%20%7Bgi(doc%2C'uploader_container').outerHTML%20%3D%20''%3Bif(gi(doc%2C'tsv_search_res_cont'))%20gi(doc%2C'tsv_search_res_cont').outerHTML%20%3D%20''%3B%7Dfunction%20handleFiles()%20%7Bwindow.FileReader%20%3F%20getAsText(this.files%5B0%5D)%20%3A%20alert('FileReader%20are%20not%20supported%20in%20this%20browser.')%3B%7Dfunction%20getAsText(fileToRead)%20%7Bvar%20reader%20%3D%20new%20FileReader()%3Breader.readAsText(fileToRead)%3Breader.onload%20%3D%20loadHandler%3Breader.onerror%20%3D%20errorHandler%3B%7Dfunction%20loadHandler(event)%20%7Bjdat_file%20%3D%20event.target.result%3BcreateSearchView()%3B%7Dfunction%20errorHandler(evt)%20%7Bif%20(evt.target.error.name%20%3D%3D%20%22NotReadableError%22)%20alert(%22Canno't%20read%20file%20!%22)%3B%7Dvar%20matchAllregXarr%20%3D%20(t%2C%20x)%20%3D%3E%20x.every(r%20%3D%3E%20r.test(t))%3Bvar%20parseIfNum%20%3D%20(s)%3D%3E%20%2F%5E%5B%5Cd%2B%7C%24%7C%5C.%7C%2C%7C-%5D%2B%24%2F.test(s)%20%26%26%20%2F%5Cd-%5Cd%2F.test(s)%20%3D%3D%3D%20false%20%3F%20parseFloat(s.replace(%2F%5C%24%7C%5C%2C%2F))%20%3A%20s%3B%2F*%20TODO%20--%20account%20for%20EU%20and%20other%20monitary%20symbols%20and%20syntax%20*%2Ffunction%20parseAsRegexArr(bool)%20%7Bvar%20checkSimpleOR%20%3D%20(s)%20%3D%3E%20%2F%5Cbor%5Cb%2Fi.test(s)%20%26%26%20%2F%5C(%2F.test(s)%20%3D%3D%3D%20false%3Bif%20(checkSimpleOR(bool))%20%7Bvar%20x%20%3D%20new%20RegExp(bool.replace(%2F%5Cs%2BOR%5Cs%2B%7C%5Cs*%5C%7C%5Cs*%2Fg%2C%20'%7C').replace(%2F%5C%2F%2Fg%2C%20'%5C%5C%2F').replace(%2F%22%2Fg%2C%20'%5C%5Cb').replace(%2F%5Cs%2B%2Fg%2C%20'.%7B0%2C14%7D')%2C%20'i')%3Bvar%20xArr%20%3D%20%5Bx%5D%3Breturn%20xArr%3B%7D%20else%20%7Bvar%20orx%20%3D%20%22%5C%5C(.%2B%3F%5C%5C)%7C(%5C%5C(%5C%5Cw%2B%5C%5Cs%7B0%2C1%7DOR%5C%5Cs%7C%5C%5Cw%2B%5C%5Cs%7B0%2C1%7DOR%5C%5Cs)%2B((%5C%5Cw%2B%5Cs)%2B%3F%7C(%5C%5Cw%2B)%5C%5C)%2B)%2B%3F%22%3Bvar%20rxReady%20%3D%20(s)%20%3D%3E%20s%20%3F%20s.replace(%2F%22%2Fg%2C%20'%5C%5Cb').trim().replace(%2F%5C)%2Fg%2C%20'').replace(%2F%5C(%2Fg%2C%20'').replace(%2F%5Cs%2B%2Fg%2C%20'.%7B0%2C14%7D').replace(%2F%5C%2F%2Fg%2C%20'%5C%5C%2F').replace(%2F%5C%2B%2Fg%2C%20'%5C%5C%2B')%20%3A%20s%3Bvar%20orMatch%20%3D%20bool%20%3F%20bool.match(new%20RegExp(orx%2C%20'g'))%20%3A%20%5B%5D%3Bvar%20orArr%20%3D%20orMatch%20%3F%20orMatch.map(b%20%3D%3E%20rxReady(b.replace(%2F%5Cs%2BOR%5Cs%2B%7C%5Cs*%5C%7C%5Cs*%2Fgi%2C%20'%7C')))%20%3A%20%5B%5D%3Bvar%20noOrs%20%3D%20bool%20%3F%20bool.replace(new%20RegExp(orx%2C%20'g')%2C%20'').split(%2F%5Cs%2B%5BAND%5Cs%2B%5D%2B%2Fi)%20%3A%20bool%3Bvar%20ands%20%3D%20noOrs%20%3F%20noOrs.map(a%20%3D%3E%20rxReady(a))%20%3A%20%5B%5D%3Bvar%20xArr%20%3D%20ands.concat(orArr).filter(i%20%3D%3E%20i%20!%3D%20'').map(x%20%3D%3E%20new%20RegExp(x%2C%20'i'))%3Breturn%20xArr%3B%7D%7Dfunction%20tsv2array()%7Bvar%20rows%20%3D%20jdat_file.split(%2F%5Cn%2F)%3Bvar%20table%20%3D%20rows.map(i%3D%3E%20i.split(%2F%5Ct%2F).map(n%3D%3E%20parseIfNum(n)))%3Breturn%20table%3B%7Dvar%20filterTableByCol%20%3D%20(t%2Cn%2Cx)%20%3D%3E%20t.filter(el%3D%3E%20matchAllregXarr(el%5Bn%5D%2Cx))%3Bvar%20colByIndex%20%3D%20(t%2Ci)%20%3D%3E%20t.map(el%3D%3E%20el%5Bi%5D)%3Bfunction%20runFilters(table%2C%20targ%2C%20search)%7Bvar%20header%20%3D%20table%5B0%5D%3Bvar%20temp%20%3D%20%5B%5D%3Btemp.push(header)%3Bvar%20targI%20%3D%20header.indexOf(targ)%3Bvar%20x%20%3D%20parseAsRegexArr(search)%3Bvar%20res%20%3D%20filterTableByCol(table%2CtargI%2Cx)%3Bres.forEach(el%3D%3E%20temp.push(el))%3Bconsole.log(temp)%3Breturn%20temp%3B%7Dfunction%20createSearchView()%7Bvar%20table%20%3D%20tsv2array()%3Bvar%20header%20%3D%20table%5B0%5D%3Bvar%20par%20%3D%20gi(doc%2C'uploader_container')%3Battr(par%2C%20'style'%2C%20%60display%3A%20inline-block%3B%20max-width%3A%2080%25%3B%20max-height%3A%2090%25%3B%20position%3A%20fixed%3B%20top%3A%201%25%3B%20left%3A%201%25%3B%20background%3A%20transparent%3B%20border-radius%3A%20.15em%3B%20padding%3A%203px%3B%20z-index%3A%2010000%3B%60)%3Bvar%20bod%20%3D%20gi(doc%2C'tsv_contBody')%3Bif(bod)%20bod.outerHTML%20%3D%20''%3Bvar%20head%20%3D%20gi(doc%2C%20'tsv_main_top_header')%3Bvar%20sBtn%20%3D%20ele('div')%3Battr(sBtn%2C%20'style'%2C%60padding%3A%206px%3B%20text-align%3A%20center%3B%20background%3A%20%23004471%3B%20color%3A%20%23fff%3B%20border%3A%202px%20solid%20%23fff%3B%20border-radius%3A%20.15em%3B%20cursor%3A%20pointer%3B%60)%3Bhead.appendChild(sBtn)%3BsBtn.innerText%20%3D%20'Search'%3BsBtn.addEventListener('click'%2C%20runTSVSearch)%3BsBtn.addEventListener('mouseover'%2ChoverOutBtn)%3BsBtn.addEventListener('mouseout'%2ChoverOutBtn)%3Bvar%20tab%20%3D%20ele('div')%3Battr(tab%2C'id'%2C'tsv_search_body')%3Battr(tab%2C%20'style'%2C%20%60display%3A%20inline-block%3B%20width%3A%20100%25%3B%20height%3A%2090%25%3B%20background%3A%20%23fff%3B%20border%3A%201px%20solid%20%23004471%3B%20border-radius%3A%20.15em%3B%20padding%3A%203px%3B%60)%3Bpar.appendChild(tab)%3Bfor(var%20r%3D0%3B%20r%3Cheader.length%3B%20r%2B%2B)%7Bvar%20colIsNum%20%3D%20colByIndex(table%2Cr).some(el%3D%3E%20Number.isInteger(el))%3Bvar%20p_type%20%3D%20colIsNum%20%3F%20'2.8%20-%2018'%20%3A%20'boolean%20search'%3Bvar%20isBool%20%3D%20colIsNum%20%3F%20'num'%20%3A%20'str'%3Bvar%20tr%20%3D%20ele('div')%3Btab.appendChild(tr)%3Bvar%20t_lab%20%3D%20ele('div')%3Btr.appendChild(t_lab)%3Bt_lab.innerText%20%3D%20header%5Br%5D%3Bvar%20t_val%20%3D%20ele('input')%3Btr.appendChild(t_val)%3Battr(t_val%2C'placeholder'%2Cp_type)%3Battr(t_val%2C'csv_data_ref_id'%2Cheader%5Br%5D)%3Battr(t_val%2C'csv_data_ref_bool'%2CisBool)%3Battr(t_val%2C'style'%2C%60padding%3A%204px%3B%20border%3A%201px%20solid%20%23004471%3B%20border-radius%3A%20.15em%3B%60)%3Bvar%20t_cls%20%3D%20ele('div')%3Btr.appendChild(t_cls)%3Bt_cls.innerText%20%3D%20'X'%3Battr(t_cls%2C'style'%2C%60padding%3A%201px%3B%20color%3A%20Crimson%3B%20float%3A%20right%3B%20cursor%3A%20pointer%3B%60)%3Bt_cls.addEventListener('click'%2C%20hidebooler)%3B%7D%7Dfunction%20checkNumberCol(target%2Cquery)%7Bif(Number.isInteger(target))%7Bvar%20greater%20%3D%20reg(%2F%5E%5B%5Cd*%5C.%5Cd*-%5D%2B%2F.exec(query)%2C%200)%20%3F%20parseFloat(reg(%2F%5E%5B%5Cd*%5C.%5Cd*-%5D%2B%2F.exec(query)%2C%200))%20%3A%200%3Bvar%20lesser%20%3D%20reg(%2F%5B%5Cd*%5C.%5Cd*-%5D%2B%24%2F.exec(query)%2C%200)%20%3F%20parseFloat(reg(%2F%5B%5Cd*%5C.%5Cd*-%5D%2B%24%2F.exec(query)%2C%200))%20%3A%200%3Breturn%20target%20%3E%3D%20greater%20%26%26%20target%20%3C%3D%20lesser%20%3F%20true%20%3A%20false%3B%7Delse%7Breturn%20false%3B%7D%7Dfunction%20runTSVSearch()%7Bvar%20paramValArr%20%3D%20Array.from(tn(gi(doc%2C%20'tsv_search_body')%2C'input')).filter(i%3D%3E%20i.value).map(i%3D%3E%20%5Bi.value%2Ci.getAttribute('csv_data_ref_bool')%2Ci.getAttribute('csv_data_ref_id')%5D)%3Bvar%20mainTable%20%3D%20tsv2array()%3Bvar%20mainHeader%20%3D%20mainTable%5B0%5D%3Bvar%20boolParams%20%3D%20paramValArr.filter(el%3D%3E%20el%5B1%5D%20%3D%3D%20'str')%3Bvar%20numParams%20%3D%20%20paramValArr.filter(el%3D%3E%20el%5B1%5D%20%3D%3D%20'num')%3Bvar%20filteredTable%20%3D%20mainTable.filter(el%3D%3E%20%7Bvar%20isMatchedStr%20%3D%20boolParams.every(i%3D%3E%20%7Bvar%20targI%20%3D%20mainHeader.indexOf(i%5B2%5D)%3Bvar%20bstring%20%3D%20parseAsRegexArr(i%5B0%5D)%3Breturn%20matchAllregXarr(el%5BtargI%5D%2Cbstring)%3B%7D)%3Bvar%20isMatchedNum%20%3D%20numParams.every(i%3D%3E%20%7Bvar%20targI%20%3D%20mainHeader.indexOf(i%5B2%5D)%3Breturn%20checkNumberCol(el%5BtargI%5D%2Ci%5B0%5D)%3B%7D)%3Breturn%20isMatchedStr%20%26%26%20isMatchedNum%3B%7D)%3BtableOutput%20%3D%20%5BmainHeader%5D.concat(filteredTable)%3Bconsole.log(tableOutput)%3BcreateTableView(tableOutput)%3B%7Dfunction%20hidebooler()%7Bthis.parentElement.outerHTML%20%3D%20''%3B%7Dfunction%20saveSearchRes()%7Bdownloadr(tableOutput%2C'filtered_file.tsv')%3B%7Dfunction%20createTableView(table)%7Bvar%20tophead%20%3D%20gi(doc%2C'tsv_main_top_header')%3Bif(gi(doc%2C'download_tsv_searchResbtn'))%20gi(doc%2C'download_tsv_searchResbtn').outerHTML%20%3D%20''%3Bvar%20dl_TSV%20%3D%20ele('div')%3Battr(dl_TSV%2C%20'id'%2C'download_tsv_searchResbtn')%3Battr(dl_TSV%2C%20'style'%2C%60padding%3A%206px%3B%20text-align%3A%20center%3B%20background%3A%20%23004471%3B%20color%3A%20%23fff%3B%20border%3A%202px%20solid%20%23fff%3B%20border-radius%3A%20.15em%3B%20cursor%3A%20pointer%3B%60)%3Btophead.appendChild(dl_TSV)%3Bdl_TSV.innerText%20%3D%20%60Save%20%24%7B(table.length-1)%7D%20results%60%3Bdl_TSV.addEventListener('click'%2C%20saveSearchRes)%3Bdl_TSV.addEventListener('mouseover'%2ChoverOutBtn)%3Bdl_TSV.addEventListener('mouseout'%2ChoverOutBtn)%3Bif(gi(doc%2C'tsv_search_res_cont'))%20gi(doc%2C'tsv_search_res_cont').outerHTML%20%3D%20''%3Bvar%20par%20%3D%20ele('div')%3Battr(par%2C'id'%2C'tsv_search_res_cont')%3Battr(par%2C%20'style'%2C%20%60display%3A%20inline-block%3B%20width%3A%2070%25%3B%20height%3A%2090%25%3B%20position%3A%20fixed%3B%20top%3A%201%25%3B%20left%3A%2028%25%3B%20background%3A%20transparent%3B%20border-radius%3A%20.15em%3B%20padding%3A%203px%3B%20z-index%3A%2010000%3B%60)%3Bdoc.body.appendChild(par)%3Bvar%20tab%20%3D%20ele('table')%3Battr(tab%2C'id'%2C'tsv_table_body')%3Battr(tab%2C%20'style'%2C%20%60display%3A%20inline-block%3B%20width%3A%20100%25%3B%20height%3A%20100%25%3B%20background%3A%20%23fff%3B%20border%3A%201px%20solid%20%23004471%3B%20order-radius%3A%20.15em%3B%20padding%3A%203px%3B%20overflow-y%3A%20scroll%3B%20overflow-x%3A%20scroll%3B%60)%3Bpar.appendChild(tab)%3Bvar%20maxTable%20%3D%20table.length%20%3E%201000%20%3F%201000%20%3A%20table.length%3Bfor(var%20r%3D0%3B%20r%3CmaxTable%3B%20r%2B%2B)%7Bvar%20tr%20%3D%20ele('tr')%3Btab.appendChild(tr)%3Br%20%3D%3D%200%20%3F%20attr(tr%2C'style'%2C%60padding%3A%204px%3B%20width%3A%2098%25%3B%20border%3A%201px%20dotted%20%23004471%3B%20background%3A%20%23004471%3B%20%20color%3A%20%23fff%60)%20%3A%20attr(tr%2C'style'%2C%60padding%3A%204px%3B%20width%3A%2098%25%3B%20border%3A%201px%20dotted%20%23004471%3B%60)%3Bfor(var%20d%3D0%3B%20d%3Ctable%5Br%5D.length%3B%20d%2B%2B)%7Bvar%20td%20%3D%20ele('td')%3Br%20%3D%3D%200%20%3F%20attr(td%2C'style'%2C%60padding%3A%204px%3B%20border%3A%201px%20dotted%20%23fff%3B%60)%20%3A%20attr(td%2C'style'%2C%60padding%3A%204px%3B%20border%3A%201px%20dotted%20%23004471%3B%60)%3Btd.innerText%20%3D%20table%5Br%5D%5Bd%5D%3Btr.appendChild(td)%3B%7D%7D%7DcreateUploadHTML()%7D)()
