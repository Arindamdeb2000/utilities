javascript:(function()%7Bvar%20gi%20%3D%20(o%2C%20s)%20%3D%3E%20o%20%3F%20o.getElementById(s)%20%3A%20console.log(o)%3Bvar%20ele%20%3D%20(t)%20%3D%3E%20document.createElement(t)%3Bvar%20attr%20%3D%20(o%2C%20k%2C%20v)%20%3D%3E%20o.setAttribute(k%2C%20v)%3Bvar%20unq%20%3D%20(arr)%20%3D%3E%20arr.filter((e%2C%20p%2C%20a)%20%3D%3E%20a.indexOf(e)%20%3D%3D%20p)%3Bvar%20delay%20%3D%20(ms)%20%3D%3E%20new%20Promise(res%20%3D%3E%20setTimeout(res%2C%20ms))%3Bfunction%20createUploadHTML()%20%7Bif%20(gi(document%2C%20'pop_FileUploader'))%20gi(document%2C%20'pop_FileUploader').outerHTML%20%3D%20''%3Bvar%20popCont%20%3D%20ele(%22div%22)%3Bdocument.body.appendChild(popCont)%3Battr(popCont%2C%20%22id%22%2C%20%22pop_FileUploader%22)%3Battr(popCont%2C%20'style'%2C%20'position%3A%20fixed%3B%20top%3A%2020%25%3B%20left%3A%2050%25%3B%20width%3A%20280px%3B%20height%3A%20100px%3B%20background%3A%20lightgrey%3B%20border%3A%201px%20solid%20%23616161%3B%20border-radius%3A%20.5em%3B%20padding%3A%206px%3B%20z-index%3A%2012000%3B')%3Bvar%20closeBtn%20%3D%20ele(%22div%22)%3Battr(closeBtn%2C%20%22id%22%2C%20%22note_btn_close%22)%3Battr(closeBtn%2C%20'style'%2C%20'background%3A%20transparent%3B%20width%3A%2015px%3B%20height%3A%2015px%3B%20transform%3A%20scale(1.8%2C%201.2)%3B%20border-radius%3A%201em%3B%20padding%3A%200px%3B%20color%3A%20Crimson%3B%20cursor%3A%20pointer')%3BpopCont.appendChild(closeBtn)%3BcloseBtn.innerText%20%3D%20%22X%22%3BcloseBtn.addEventListener(%22click%22%2C%20close)%3Bvar%20uploadElm%20%3D%20ele(%22input%22)%3Battr(uploadElm%2C%20%22id%22%2C%20%22customFileInput%22)%3Battr(uploadElm%2C%20%22type%22%2C%20%22file%22)%3Battr(uploadElm%2C%20%22name%22%2C%20%22file%5B%5D%22)%3Battr(uploadElm%2C%20%22multiple%22%2C%20%22true%22)%3BpopCont.appendChild(uploadElm)%3BuploadElm.style.transform%20%3D%20%22scale(1.1%2C%201.1)%20translate(5%25%2C%2080%25)%22%3BuploadElm.addEventListener(%22change%22%2C%20handleFiles)%3Bfunction%20close()%20%7Bdocument.body.removeChild(popCont)%3B%7D%7DcreateUploadHTML()%3Bvar%20fileArray%20%3D%20%5B%5D%3Bvar%20textFile%20%3D%20''%3Bvar%20loadHandleJson%20%3D%20(e)%20%3D%3E%20Array.isArray(JSON.parse(e.target.result))%20%3F%20JSON.parse(e.target.result).forEach(i%20%3D%3E%20fileArray.push(i))%20%3A%20fileArray.push(JSON.parse(e.target.result))%3Bvar%20loadHandleText%20%3D%20(e)%20%3D%3E%20textFile%20%3D%20textFile%20%2B%20e.target.result%3Basync%20function%20handleFiles()%20%7Bvar%20files%20%3D%20this.files%3Bfor%20(var%20i%20%3D%200%3B%20i%20%3C%20files.length%3B%20i%2B%2B)%20%7Bawait%20getAsText(files%5Bi%5D)%3B%7Dgi(document%2C%20'pop_FileUploader').outerHTML%20%3D%20''%3Bawait%20delay(1000)%3BconvertToTSV()%3B%7Dfunction%20getAsText(f)%20%7Bvar%20reader%20%3D%20new%20FileReader()%3Breader.readAsText(f)%3Bif%20(%2F%5C.json%2Fi.test(f.name))%20%7Breader.onload%20%3D%20loadHandleJson%3B%7D%20else%20%7Breader.onload%20%3D%20loadHandleText%3B%7D%7Dfunction%20convertToTSV()%20%7Bvar%20firstLevel%20%3D%20fileArray.map(el%20%3D%3E%20Object.entries(el))%3Bvar%20lens%20%3D%20Math.max(...firstLevel.map(el%20%3D%3E%20el.length))%3Bvar%20header%20%3D%20unq(firstLevel.map(el%20%3D%3E%20el.map(itm%20%3D%3E%20itm%5B0%5D)).flat())%3Bvar%20table%20%3D%20%5Bheader%5D%3Bvar%20str%20%3D%20(o)%20%3D%3E%20typeof%20o%20%3D%3D%20'object'%20%3F%20JSON.stringify(o).replace(%2F%5Cn%7C%5Cr%2Fg%2C%20'%20')%20%3A%20o.toString().replace(%2F%5Cn%7C%5Cr%2Fg%2C%20'%20')%3Bfor%20(var%20i%20%3D%200%3B%20i%20%3C%20firstLevel.length%3B%20i%2B%2B)%20%7Bvar%20arr%20%3D%20%5B%5D%3Bvar%20row%20%3D%20%5B%5D%3Bfor%20(var%20s%20%3D%200%3B%20s%20%3C%20firstLevel%5Bi%5D.length%3B%20s%2B%2B)%20%7Bvar%20place%20%3D%20header.indexOf(firstLevel%5Bi%5D%5Bs%5D%5B0%5D)%3Barr%5Bplace%5D%20%3D%20firstLevel%5Bi%5D%5Bs%5D%5B1%5D%3B%7Dfor%20(var%20a%20%3D%200%3B%20a%20%3C%20arr.length%3B%20a%2B%2B)%20%7Bif%20(arr%5Ba%5D)%20%7Brow.push(arr%5Ba%5D)%3B%7D%20else%20%7Brow.push('')%3B%7D%7Dtable.push(row)%3B%7Dfunction%20downloadr(arr2D%2C%20filename)%20%7Bvar%20data%20%3D%20%2F%5C.json%24%7C.js%24%2F.test(filename)%20%3F%20JSON.stringify(arr2D)%20%3A%20arr2D.map(el%20%3D%3E%20el.reduce((a%2C%20b)%20%3D%3E%20a%20%2B%20'%5Ct'%20%2B%20b)).reduce((a%2C%20b)%20%3D%3E%20a%20%2B%20'%5Cr'%20%2B%20b)%3Bvar%20type%20%3D%20%2F%5C.json%24%7C.js%24%2F.test(filename)%20%3F%20'data%3Aapplication%2Fjson%3Bcharset%3Dutf-8%2C'%20%3A%20'data%3Atext%2Fplain%3Bcharset%3Dutf-8%2C'%3Bvar%20file%20%3D%20new%20Blob(%5Bdata%5D%2C%20%7Btype%3A%20type%7D)%3Bif%20(window.navigator.msSaveOrOpenBlob)%20%7Bwindow.navigator.msSaveOrOpenBlob(file%2C%20filename)%3B%7D%20else%20%7Bvar%20a%20%3D%20document.createElement('a')%2Curl%20%3D%20URL.createObjectURL(file)%3Ba.href%20%3D%20url%3Ba.download%20%3D%20filename%3Bdocument.body.appendChild(a)%3Ba.click()%3BsetTimeout(()%20%3D%3E%20%7Bdocument.body.removeChild(a)%3Bwindow.URL.revokeObjectURL(url)%3B%7D%2C%2010)%3B%7D%7Dvar%20output%20%3D%20table.map(el%20%3D%3E%20el.map(itm%20%3D%3E%20str(itm)))%3Bdownloadr(output%2C%20'converted_file.tsv')%3B%7D%7D)()
